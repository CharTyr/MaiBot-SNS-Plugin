# ============================================================================
# MaiBot_SNS 社交平台采集插件配置
# ============================================================================
# 本插件通过MCP桥接采集社交平台内容（如小红书），写入ChatHistory记忆系统
# 支持做梦模块集成，让MaiBot在"梦境"中学习社交平台知识

[plugin]
name = "maibot_sns"
version = "1.0.0"
enabled = true  # 是否启用插件

# ============================================================================
# 平台配置
# ============================================================================
# 配置要采集的社交平台，目前支持小红书
# 需要先在 MCP桥接插件 中配置对应的MCP服务器

[platform.xiaohongshu]
enabled = true                          # 是否启用小红书采集
mcp_server_name = "mcp_xiaohongshu"     # MCP工具名前缀
                                        # 工具名格式: {mcp_server_name}_{tool_name}
                                        # 例如: mcp_xiaohongshu_list_feeds
fetch_detail = true                     # 是否获取笔记详情
                                        # 开启后会调用 get_feed_detail 获取完整正文
                                        # 关闭则只使用列表中的简短描述

# 自定义工具名（可选，默认使用标准名称）
# [platform.xiaohongshu.tools]
# list = "list_feeds"                   # 获取列表的工具后缀
# search = "search_feeds"               # 搜索的工具后缀
# detail = "get_feed_detail"            # 获取详情的工具后缀

# ============================================================================
# 添加其他平台示例（通用配置）
# ============================================================================
# 你可以添加任何提供类似 API 的 MCP 服务器
# 插件会自动尝试解析返回的 JSON 数据

# [platform.weibo]
# enabled = false
# mcp_server_name = "mcp_weibo"
# fetch_detail = true
# # 自定义字段映射（如果 API 返回的字段名不同）
# [platform.weibo.field_mapping]
# feed_id = ["id", "mid"]
# title = ["text", "content"]
# author = ["user.screen_name", "user.name"]
# like_count = ["attitudes_count", "like_count"]

# [platform.bilibili]
# enabled = false
# mcp_server_name = "mcp_bilibili"
# fetch_detail = true
# [platform.bilibili.tools]
# list = "get_recommend"
# search = "search_video"
# detail = "get_video_info"

# ============================================================================
# 内容过滤配置
# ============================================================================
# 设置过滤规则，只保存有价值的内容，避免存储垃圾信息

[filter]
min_like_count = 100                 # 最小点赞数，低于此值的内容会被过滤
                                     # 设为0则不过滤（调试时可设为0）

keyword_whitelist = []               # 关键词白名单（优先保留）
                                     # 包含这些关键词的内容会优先保留，即使点赞数不够
                                     # 示例: ["教程", "攻略", "科普"]

keyword_blacklist = []               # 关键词黑名单（直接过滤）
                                     # 包含这些关键词的内容会被直接过滤
                                     # 示例: ["广告", "推广", "代购"]

# ============================================================================
# 内容处理配置
# ============================================================================

[processing]
enable_personality_match = true      # 是否启用人格兴趣匹配
                                     # 开启后会用LLM判断内容是否符合MaiBot的兴趣
                                     # 只有符合兴趣的内容才会获取详情和写入记忆
                                     # 这让MaiBot在"做梦"时只学习感兴趣的内容

enable_summary = true                # 是否启用LLM摘要生成
                                     # 开启后会调用LLM对长文本生成摘要

summary_threshold = 200              # 摘要触发长度（字符数）
                                     # 超过此长度的内容才会生成摘要

enable_image_recognition = false     # 是否启用图片识别
                                     # 开启后会调用VLM对图片进行理解
                                     # 注意：会增加处理时间和API调用

image_recognition_timeout = 30       # 图片识别超时时间（秒）

# ============================================================================
# 记忆存储配置
# ============================================================================

[memory]
max_records = 1000                   # 每个平台最大记录数
                                     # 超过此数量会自动删除最旧的记录

auto_cleanup_days = 30               # 自动清理天数
                                     # 超过此天数的记录会被自动清理

# ============================================================================
# 定时任务配置
# ============================================================================
# 配置自动采集任务，无需手动干预

[scheduler]
enabled = false                      # 是否启用定时采集
                                     # 建议先手动测试成功后再开启

interval_minutes = 60                # 采集间隔（分钟）
                                     # 建议不要设置太短，避免频繁请求

first_delay_minutes = 5              # 首次采集延迟（分钟）
                                     # 插件启动后等待多久开始第一次采集

# 定时任务列表（可选，不配置则使用默认任务）
# [[scheduler.tasks]]
# platform = "xiaohongshu"           # 平台名称
# keyword = ""                       # 搜索关键词（留空则获取推荐内容）
# count = 10                         # 每次采集数量
# enabled = true                     # 是否启用此任务

# ============================================================================
# 做梦模块集成配置
# ============================================================================
# 让MaiBot在"做梦"时可以主动浏览社交平台，学习新知识

[dream]
enabled = true                       # 是否启用做梦模块集成
                                     # 开启后会注册 collect_sns_content 工具到做梦模块
                                     # 做梦 agent 可以选择调用此工具来采集内容

# ============================================================================
# 调试配置
# ============================================================================

[debug]
enabled = false                      # 是否启用调试模式
                                     # 开启后会输出详细的过滤日志
